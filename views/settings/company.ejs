

<div class="container mt-5 fade-in">
  <h1 class="fw-bold text-primary mb-4">
    <i class="bi bi-gear"></i> Paramétrage de l'entreprise
  </h1>

  <% if (successMessage) { %>
    <div class="alert alert-success"><%= successMessage %></div>
  <% } %>

  <form action="/settings" method="POST" enctype="multipart/form-data">
    <div class="row g-3">
      <div class="col-md-6">
        <label for="company_name" class="form-label">Nom de l'entreprise</label>
        <input type="text" name="company_name" class="form-control" value="<%= settings.company_name || '' %>" />
      </div>
      <div class="col-md-6">
        <label for="company_email" class="form-label">Email</label>
        <input type="email" name="company_email" class="form-control" value="<%= settings.company_email || '' %>" />
      </div>
      <div class="col-md-6">
        <label for="company_phone" class="form-label">Téléphone</label>
        <input type="text" name="company_phone" class="form-control" value="<%= settings.company_phone || '' %>" />
      </div>
      <div class="col-md-6">
        <label for="company_address" class="form-label">Adresse</label>
        <input type="text" name="company_address" class="form-control" value="<%= settings.company_address || '' %>" />
      </div>
      <div class="col-md-6">
        <label for="company_rccm" class="form-label">RCCM</label>
        <input type="text" name="company_rccm" class="form-control" value="<%= settings.company_rccm || '' %>" />
      </div>
      <div class="col-md-6">
        <label for="company_ifu" class="form-label">IFU</label>
        <input type="text" name="company_ifu" class="form-control" value="<%= settings.company_ifu || '' %>" />
      </div>
      <div class="col-md-4">
        <label for="currency" class="form-label">Devise</label>
        <input type="text" name="currency" class="form-control" value="<%= settings.currency || '' %>" />
      </div>
      <div class="col-md-4">
        <label for="show_logo_on_invoice" class="form-label">Afficher le logo sur facture</label>
        <select name="show_logo_on_invoice" class="form-select">
          <option value="yes" <%= settings.show_logo_on_invoice === 'yes' ? 'selected' : '' %>>Oui</option>
          <option value="no" <%= settings.show_logo_on_invoice === 'no' ? 'selected' : '' %>>Non</option>
        </select>
      </div>
      <div class="col-md-4">
        <label for="tax_enabled" class="form-label">TVA activée</label>
        <select name="tax_enabled" class="form-select">
          <option value="yes" <%= settings.tax_enabled === 'yes' ? 'selected' : '' %>>Oui</option>
          <option value="no" <%= settings.tax_enabled === 'no' ? 'selected' : '' %>>Non</option>
        </select>
      </div>
      <div class="col-md-4">
        <label for="tax_rate" class="form-label">Taux de TVA (%)</label>
        <input type="number" step="0.01" name="tax_rate" class="form-control" value="<%= settings.tax_rate || '' %>" />
      </div>
      <div class="col-md-6">
        <label for="invoice_footer" class="form-label">Pied de page facture</label>
        <textarea name="invoice_footer" class="form-control" rows="2"><%= settings.invoice_footer || '' %></textarea>
      </div>
      <div class="col-md-4">
        <label for="auto_invoice_numbering" class="form-label">Numérotation automatique</label>
        <select name="auto_invoice_numbering" class="form-select">
          <option value="yes" <%= settings.auto_invoice_numbering === 'yes' ? 'selected' : '' %>>Oui</option>
          <option value="no" <%= settings.auto_invoice_numbering === 'no' ? 'selected' : '' %>>Non</option>
        </select>
      </div>
      <div class="col-md-4">
        <label for="language" class="form-label">Langue</label>
        <select name="language" class="form-select">
          <option value="fr" <%= settings.language === 'fr' ? 'selected' : '' %>>Français</option>
          <option value="en" <%= settings.language === 'en' ? 'selected' : '' %>>Anglais</option>
        </select>
      </div>
      <div class="col-md-4">
        <label for="theme" class="form-label">Thème</label>
        <select name="theme" class="form-select">
          <option value="light" <%= settings.theme === 'light' ? 'selected' : '' %>>Clair</option>
          <option value="dark" <%= settings.theme === 'dark' ? 'selected' : '' %>>Sombre</option>
        </select>
      </div>
      <div class="col-md-6">
        <label for="logo" class="form-label">Logo</label>
        <input type="file" name="logo" class="form-control" accept="image/*" />
        <% if (settings.logo) { %>
          <p class="mt-2">Logo actuel :<br>
            <img src="/uploads/<%= settings.logo %>" alt="Logo" style="max-height: 100px;" />
          </p>
        <% } %>
      </div>
    </div>
    <div class="mt-4">
      <button type="submit" class="btn btn-primary">
        <i class="bi bi-save"></i> Enregistrer
      </button>
    </div>
  </form>
</div>
