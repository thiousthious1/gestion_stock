<h2 class="fw-bold mb-4 text-primary"><i class="bi bi-person-circle me-2"></i> Profil utilisateur</h2>
<% if (successMessage) { %>
  <div class="alert alert-success"><%= successMessage %></div>
<% } %>

<% if (typeof user !== 'undefined') { %>
  <form action="/settings/profile/<%= user.id %>" method="POST" enctype="multipart/form-data" class="row g-3">
        <div class="col-md-6">
            <label class="form-label">Nom & prénom</label>
            <input type="text" name="username" value="<%= user.username %>" class="form-control" required>
        </div>
        <div class="col-md-6">
            <label class="form-label">Email</label>
            <input type="email" name="email" value="<%= user.email || '' %>" class="form-control">
        </div>
        <div class="col-md-6">
            <label class="form-label">Téléphone</label>
            <input type="text" name="phone" value="<%= user.phone || '' %>" class="form-control">
        </div>
        <div class="col-md-6">
            <label class="form-label">Adresse</label>
            <input type="text" name="address" value="<%= user.address || '' %>" class="form-control">
        </div>
        <div class="col-md-6">
            <label class="form-label">Mot de passe (laisser vide pour ne pas changer)</label>
            <input type="password" name="password" class="form-control">
        </div>
        <div class="col-md-6">
            <label class="form-label">Photo de profil</label>
            <input type="file" name="avatar" class="form-control">
            <% if (user.avatar) { %>
            <div class="mt-2">
                <label class="form-label">Photo actuelle :</label><br>
                <img src="<%= user.avatar %>" alt="avatar" height="80">
                <input type="hidden" name="existingAvatar" value="<%= user.avatar %>">
            </div>
            <% } %>
        </div>
        <div class="col-12">
            <button type="submit" class="btn btn-primary"><i class="bi bi-save me-1"></i> Enregistrer</button>
        </div>
    </form>
<% } else { %>
  <div class="alert alert-danger">Utilisateur introuvable.</div>
<% } %>