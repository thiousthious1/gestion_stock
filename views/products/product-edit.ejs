<%- include('../partials/header', { page: 'products', pageGroup: 'products' }) %>

<div class="container mt-4">
  <h2 class="fw-bold text-primary mb-4"><i class="bi bi-pencil-square me-2"></i> Modifier le produit</h2>

  <form action="/products/edit/<%= product.id %>" method="POST">
  <div class="row mb-3">
    <div class="col-md-6">
      <label class="form-label">Nom du produit</label>
      <input type="text" name="nom" value="<%= product.nom %>" class="form-control" required>
    </div>
    <div class="col-md-6">
      <label class="form-label">Catégorie</label>
      <select name="categorie_id" class="form-select" required>
        <% categories.forEach(c => { %>
          <option value="<%= c.id %>" <%= c.id === product.categorie_id ? 'selected' : '' %>><%= c.nom %></option>
        <% }) %>
      </select>
    </div>
  </div>

  <div class="row mb-3">
    <div class="col-md-6">
      <label class="form-label">Prix d'achat</label>
      <input type="number" step="0.01" name="prix_achat" value="<%= product.prix_achat %>" class="form-control">
    </div>
    <div class="col-md-6">
      <label class="form-label">Prix de vente</label>
      <input type="number" step="0.01" name="prix_vente" value="<%= product.prix_vente %>" class="form-control">
    </div>
  </div>

  <div class="row mb-3">
    <div class="col-md-6">
      <label class="form-label">Quantité en stock</label>
      <input type="number" name="quantite" value="<%= product.quantite %>" class="form-control" required>
    </div>
    <div class="col-md-6"></div> <!-- pour garder l'alignement -->
  </div>

  <div class="mb-3">
    <label class="form-label">Description</label>
    <textarea name="description" class="form-control" rows="2"><%= product.description %></textarea>
  </div>

  <div class="text-end">
    <button type="submit" class="btn btn-primary"><i class="bi bi-save me-1"></i> Mettre à jour</button>
    <a href="/products" class="btn btn-secondary">Annuler</a>
  </div>
</form>

</div>

<%- include('../partials/footer') %>
